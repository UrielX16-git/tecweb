<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Nuevo Producto</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1 class="mt-5">Agregar Nuevo Producto</h1>
        <form action="set_producto_v2.php" method="post" class="mt-4">
            <div class="form-group">
                <label for="nombre">Nombre:</label>
                <input type="text" class="form-control" id="nombre" name="nombre" required>
            </div>
            <div class="form-group">
                <label for="marca">Marca:</label>
                <input type="text" class="form-control" id="marca" name="marca" required>
            </div>
            <div class="form-group">
                <label for="modelo">Modelo:</label>
                <input type="text" class="form-control" id="modelo" name="modelo" required>
            </div>
            <div class="form-group">
                <label for="precio">Precio:</label>
                <input type="number" class="form-control" id="precio" name="precio" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="detalles">Detalles:</label>
                <textarea class="form-control" id="detalles" name="detalles" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label for="unidades">Unidades: <output name="unidadesOutput" id="unidadesOutput">125</output></label>
                <input type="range" class="custom-range" id="unidades" name="unidades" min="0" max="250" value="125">
            </div>
            <div class="form-group">
                <label for="imagen">Imagen:</label>
                <select class="form-control" id="imagen" name="imagen"></select>
            </div>
            <button type="submit" class="btn btn-primary">Agregar Producto</button>
        </form>
    </div>

    <script>
        // Script para el slider de unidades
        const unidadesInput = document.getElementById('unidades');
        const unidadesOutput = document.getElementById('unidadesOutput');
        unidadesInput.addEventListener('input', () => {
            unidadesOutput.textContent = unidadesInput.value;
        });

        // Script para poblar el selector de im치genes
        document.addEventListener('DOMContentLoaded', function() {
            fetch('get_images.php')
                .then(response => response.json())
                .then(images => {
                    const imagenSelect = document.getElementById('imagen');
                    if (images.length > 0) {
                        images.forEach(imagePath => {
                            const option = document.createElement('option');
                            option.value = imagePath;
                            option.textContent = imagePath.split('/').pop(); // Muestra solo el nombre del archivo
                            imagenSelect.appendChild(option);
                        });
                    } else {
                        const option = document.createElement('option');
                        option.textContent = 'No hay im치genes en el directorio';
                        option.disabled = true;
                        imagenSelect.appendChild(option);
                    }
                })
                .catch(error => {
                    console.error('Error al cargar las im치genes:', error);
                    const imagenSelect = document.getElementById('imagen');
                    const option = document.createElement('option');
                    option.textContent = 'Error al cargar im치genes';
                    option.disabled = true;
                    imagenSelect.appendChild(option);
                });
        });
    </script>
</body>
</html>